// ============================================================================
// _tables.scss — TBICS tables (general, org, intl-connections) — deduped
// ============================================================================

@use "../settings/tokens" as *; // for CSS vars like --tbics-solid if defined

/* =========================================
   1) Generic “TBICS table” chrome
   ========================================= */
.tbics-table {
  width: 100%;
  background: #fff;
  border-radius: 12px;
  overflow: hidden; /* rounds the header corners */
  box-shadow: 0 8px 24px rgba(0,0,0,.06);

  thead th {
    background: var(--tbics-solid, #013f87);
    color: #fff;
    font-weight: 700;
    letter-spacing: .2px;
    border: 0 !important;
    padding: .95rem 1.1rem;
  }

  tbody tr { transition: background .15s ease; }
  tbody tr:nth-child(even) { background: #f7faff; }      /* very light zebra */
  tbody tr:hover { background: #eef5ff; }                /* hover highlight */

  th, td {
    border: 0 !important;
    padding: .9rem 1.1rem;
    vertical-align: middle;
    color: #2f2f2f;
  }

  /* First column a bit bolder for readability */
  tbody td:first-child,
  tbody th[scope="row"] { font-weight: 600; }

  /* Compact on small screens */
  @media (max-width: 640px) {
    th, td { padding: .75rem .9rem; }
  }
}

/* Optional section heading spacing often used above tables */
#submission-dates h2.h4 {
  font-weight: 800;
  letter-spacing: .2px;
  margin-bottom: 1rem;
}

/* Primary/outline buttons in TBICS palette (used near tables sometimes) */
#cfp-page .btn-primary,
#submission-dates .btn-primary {
  background-color: var(--tbics-solid, #013f87);
  border-color: var(--tbics-solid, #013f87);
}
#submission-dates .btn-outline-primary {
  color: var(--tbics-solid, #013f87);
  border-color: var(--tbics-solid, #013f87);
}
#submission-dates .btn-outline-primary:hover {
  background-color: var(--tbics-solid, #013f87);
  color: #fff;
}

/* =========================================
   2) Org KV Table (card-less, centered, accessible)
   ========================================= */
#about-tbics {
  .org-kv-wrap{
    max-width: min(100%, 980px);
    margin-inline: auto;
  }

  .org-kv-table{
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    background: transparent;
    font-size: clamp(15px, 1.9vw, 18px);
  }

  /* rows/cells */
  .org-kv-table th,
  .org-kv-table td{
    padding: 10px 16px;
    vertical-align: top;
    border-top: 1px solid rgba(1,63,135,.14);
  }

  /* remove top border on first row */
  .org-kv-table tbody tr:first-child th,
  .org-kv-table tbody tr:first-child td{
    border-top: 0;
  }

  /* label column */
  .org-kv-table th{
    width: clamp(180px, 26ch, 340px);
    text-align: right;
    font-weight: 800;
    white-space: nowrap;
    color: #1c2733;
    padding-right: clamp(12px, 2vw, 22px);
  }

  /* value column */
  .org-kv-table td{ color: #22303c; }

  /* lists inside values — restore bullets */
  .org-kv-table .committee-list{
    list-style: disc !important;
    margin: 0;
    padding-left: 1.25rem;
  }
  .org-kv-table .committee-list li{ margin: .35rem 0; }

  /* subtle zebra + hover for readability */
  .org-kv-table tr:nth-child(even) td{ background: rgba(0,0,0,.025); }
  .org-kv-table tr:hover td{ background: rgba(1,63,135,.04); }

  /* ------ Mobile: stack label above value ------ */
  @media (max-width: 720px){
    .org-kv-table,
    .org-kv-table tbody,
    .org-kv-table tr,
    .org-kv-table th,
    .org-kv-table td{
      display: block;
      width: 100%;
    }
    .org-kv-table th{
      text-align: left;
      padding-bottom: .25rem;
      border-top: 0;
    }
    .org-kv-table td{
      padding-top: 0;
      border-top: 0;
    }
    /* divider between stacked rows */
    .org-kv-table tr + tr{
      border-top: 1px solid rgba(1,63,135,.14);
      margin-top: .35rem;
      padding-top: .35rem;
    }
  }
}

/* =========================================
   3) Program Chairs table — cream on the grid, no outer halo
   ========================================= */
#about-tbics {

  /* Gutenberg figure variant */
  .wp-block-table.org-table {
    border: 1px solid rgba(1,63,135,.12);
    border-radius: 16px;
    box-shadow: 0 8px 22px rgba(0,0,0,.08);
    overflow: hidden;

    > table {
      background: #FAF5EE !important; /* cream inside */
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }
  }

  /* Bootstrap table inside a tight card */
  .org-card--tight {
    padding: 0;

    .table-responsive {
      border: 1px solid rgba(1,63,135,.12);
      border-radius: 16px;
      box-shadow: 0 8px 22px rgba(0,0,0,.08);
      overflow: hidden;
      margin: 0;
    }

    table.org-table {
      background: #FAF5EE;
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }
  }

  /* Shared table chrome */
  .org-table thead th{
    background: rgba(255,255,255,.66);
    color:#3a3a3a;
    text-transform:uppercase;
    letter-spacing:.02em;
    font-weight:700;
    padding:14px 16px 16px;
    border-bottom:1px solid rgba(1,63,135,.16);
  }
  .org-table tbody td{
    padding:14px 16px;
    border-top:1px solid rgba(1,63,135,.10);
    overflow-wrap:anywhere;
    hyphens:auto;
  }
  .org-table tbody tr:nth-child(even){ background:rgba(0,0,0,.035); }
  .org-table tbody tr:hover{ background:rgba(1,63,135,.06); }
}

/* Remove default WP/Bootstrap bottom margins in these contexts */
.table,
.wp-block-table table { margin-bottom: 0; }

/* =========================================
   4) International Connections table (+ mobile cards)
   ========================================= */

/* Section container */
.intl-connections .table-responsive { overflow-x: auto; }

/* Table base */
.intl-connections table {
  background: #fff;
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid rgba(0,0,0,.18);
  border-radius: 6px;
  overflow: hidden; /* keep rounded corners clean */
}

.intl-connections thead th {
  background: var(--tbics-solid, #013f87);
  color: #fff;
  font-weight: 700;
  vertical-align: middle;
  padding: .9rem 1rem;
  border-bottom: 2px solid rgba(0,0,0,.25);
}

.intl-connections tbody td {
  padding: .85rem 1rem;
  vertical-align: middle;
  border-top: 1px solid rgba(0,0,0,.16);
  border-right: 1px solid rgba(0,0,0,.12);
}
.intl-connections tbody td:last-child,
.intl-connections thead th:last-child { border-right: 0; }

/* Country cell: flag + name */
.intl-connections .flag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 20px;
  margin-right: 10px;
  border-radius: 2px;
  overflow: hidden;
  background: #f1f1f1; /* fallback before img loads */
}
.intl-connections .flag img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.intl-connections .flag-emoji { font-size: 18px; line-height: 1; }
.intl-connections .country-name { font-weight: 600; }

/* Duration cell: icon + text */
.intl-connections td.duration { white-space: nowrap; }
.intl-connections td.duration img {
  width: 18px;
  height: 18px;
  vertical-align: -3px;
  margin-right: 8px;
}

/* --- Mobile card layout for the International Connections table --- */
@media (max-width: 680px){
  .intl-connections .table-responsive{ overflow: visible; } /* no horiz scroll in card mode */

  /* Keep desktop semantics but visually hide the header for phones (accessible) */
  .intl-connections thead{
    position: absolute !important;
    width: 1px; height: 1px; padding: 0; margin: -1px;
    overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
  }

  .intl-connections tbody tr{
    display: block;
    background: #fff;
    border: 1px solid rgba(0,0,0,.12);
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,.06);
    margin-bottom: 12px;
    overflow: hidden;
  }

  .intl-connections tbody td{
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .75rem 1rem;
    border: 0; /* kill table borders */
  }
  .intl-connections tbody td + td{
    border-top: 1px solid rgba(0,0,0,.06); /* subtle divider between rows */
  }

  /* Print the column name for each value */
  .intl-connections tbody td::before{
    content: attr(data-label);
    font-weight: 700;
    color: #5b6b83;
    margin-right: 12px;
    flex: 0 0 9ch; /* consistent label width */
  }

  /* Country cell: keep flag next to country name */
  .intl-connections tbody td[data-label="Country"]{
    justify-content: flex-start;
    gap: 8px;
  }
  .intl-connections .flag{ flex: 0 0 28px; margin-right: 8px; }

  /* Tidy duration cell */
  .intl-connections td.duration img{ margin-right: 8px; }
}
