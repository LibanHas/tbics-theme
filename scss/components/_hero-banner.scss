// ============================================================================
// HERO BANNER — reusable page hero (tinted + optional glass card)
// Usage: <section class="page-hero-banner" style="background-image:url(...)">…</section>
// ============================================================================

@use "../settings/tokens" as *;
@use "../settings/breakpoints" as *;

// --- Base -------------------------------------------------------------------
.page-hero-banner{
  --pad-x:       clamp(12px, 4vw, 24px);
  --pad-top:     clamp(64px, 18svh, 120px);
  --pad-btm:     clamp(20px, 8svh, 72px);
  --card-pad:    clamp(12px, 3.2vw, 24px);
  --card-radius: 16px;
  --min-h:       clamp(260px, 55svh, 520px);

  position: relative;
  color: inherit;
  overflow: hidden; /* fallback */
  isolation: isolate;
  background: center / cover no-repeat;
  min-height: var(--min-h);
  padding: var(--pad-top) 0 calc(var(--pad-btm) + 1px);

  /* anti-hairline */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  backface-visibility: hidden;
  background-clip: padding-box;
  @supports (overflow: clip){ overflow: clip; }

  &::before{
    content:"";
    position:absolute;
    inset: 1px; 
    background: rgba(1, 63, 135, 0.18);
    backdrop-filter: blur(3px) saturate(100%);
    -webkit-backdrop-filter: blur(6px) saturate(120%);
    z-index:1;
  }

  &::after{
    content:"";
    position:absolute;
    left:-1px; right:-1px; bottom:-1px;
    height:clamp(64px, 16svh, 160px);
    background:linear-gradient(to bottom, rgba(221,235,247,0) 0%, #ddebf7 100%);
    z-index:1;
  }

  .container{
    position: relative;
    z-index: 2;
    padding-inline: var(--pad-x);
  }

  /* base (desktop) */
  .hero-glass{
    display: inline-block;
    max-width: min(48rem, 100%);
    width: 100%;
    box-sizing: border-box;
    padding: var(--card-pad);
    background: var(--hero-glass-bg) !important;
    border-radius: var(--card-radius);
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  h1{
    font-size: clamp(24px, 6.5vw, 44px);
    line-height: 1.1;
    margin: 0 0 .4rem;
    overflow-wrap: anywhere;
    hyphens: auto;
  }

  .lead{
    font-size: clamp(13px, 3.6vw, 18px);
    line-height: 1.35;
    margin: 0;
  }

  /* --- Mobile tweaks (use & to avoid double .page-hero-banner) --- */
@media (max-width: 600px){
  /* more breathing room under the navbar */
  &{
    --card-radius: 12px;
    --pad-top: clamp(104px, 22svh, 148px);          /* was clamp(64px, 18svh, 120px) */
    padding-top: var(--pad-top);                   /* already used via shorthand above */
    /* optionally include notch safe area: */
    padding-top: calc(var(--pad-top) + env(safe-area-inset-top, 0px));
  }

  & .hero-glass{
    max-width: clamp(18rem, 86vw, 24rem);
    margin-inline: auto;
    padding: clamp(10px, 3.2vw, 14px) clamp(12px, 4vw, 16px);
    /* if you prefer nudging only the glass instead of global pad: */
    /* margin-top: clamp(8px, 2.4vw, 16px); */
  }

  & h1{  font-size: clamp(22px, 6vw, 30px); }
  & .lead{ font-size: clamp(12px, 3.2vw, 16px); }
}

@media (max-width: 380px){
  & .hero-glass{ max-width: clamp(16rem, 92vw, 22rem); }
}

}

/* Phones: center text + tweak filters & bg position */
/* Keep this, but don't override hero-glass max-width again */
@media (max-width: 600px){
  .page-hero-banner{
    text-align:center; align-items:flex-end; background-position: 50% 35%;
    &::before{
      backdrop-filter: blur(2px);
      -webkit-backdrop-filter: blur(2px);
      background-color: rgba(1,63,135,.35);
    }
  }
  .page-hero-banner .hero-glass{
    margin-inline:auto; /* removed the old max-width override */
  }
}



/* ===== Shared anniversary pill styles (hero & navbar) ====================== */
.anniv-wrap{
  position: relative;
  display: inline-block;
  isolation: isolate;
  margin: 0; /* spacing is applied by .anniv-hero only */
}

.anniv-pill{
  --gold: var(--brand, #c49a2c);
  display: inline-flex; align-items: center; gap: .45rem;
  padding: .5rem .9rem;
  border-radius: 999px;
  font-weight: 800; white-space: nowrap;
  color: #fff;
  background: linear-gradient(
    180deg,
    color-mix(in oklab, var(--gold), #000 8%) 0%,
    color-mix(in oklab, var(--gold), #fff 10%) 100%
  );
  box-shadow: inset 0 -2px 0 rgba(0,0,0,.12), 0 6px 16px rgba(0,0,0,.18);
  position: relative;
  z-index: 2;
}

.anniv-star{ color:#fff; text-shadow: 0 0 6px rgba(0,0,0,.25); }

.anniv-wrap::after{ content:none !important; }
.anniv-wrap::before{
  content:"";
  position:absolute;
  inset:-28px -36px;
  z-index:1;
  pointer-events:none;
  background:
    radial-gradient(0.5px 0.5px at 4% 10%,   rgba(255,218,130,.95) 99%, transparent 100%),
    radial-gradient(0.75px 0.75px at 11% 24%, rgba(255,235,185,.85) 99%, transparent 100%),
    radial-gradient(0.25px 0.25px at 18% 6%,  rgba(244,210,110,.90) 99%, transparent 100%),
    radial-gradient(0.15px 0.15px at 23% 18%, rgba(255,230,170,.90) 99%, transparent 100%),
    radial-gradient(0.5px 0.5px at 29% 30%,  rgba(255,220,145,.92) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 36% 12%,  rgba(255,235,185,.80) 99%, transparent 100%),
    radial-gradient(0.3px 0.3px at 42% 26%,  rgba(255,215,130,.92) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 49% 8%,   rgba(255,232,175,.82) 99%, transparent 100%),
    radial-gradient(0.5px 0.5px at 56% 20%,  rgba(255,225,155,.90) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 62% 10%,  rgba(255,240,195,.82) 99%, transparent 100%),
    radial-gradient(0.3px 0.3px at 70% 22%,  rgba(244,210,110,.92) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 78% 6%,   rgba(255,235,185,.85) 99%, transparent 100%),
    radial-gradient(0.5px 0.5px at 84% 18%,  rgba(255,220,145,.90) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 92% 12%,  rgba(255,230,170,.85) 99%, transparent 100%),

    radial-gradient(0.2px 0.2px at 7% 58%,   rgba(255,235,185,.85) 99%, transparent 100%),
    radial-gradient(0.3px 0.3px at 16% 66%,  rgba(255,215,130,.92) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 24% 52%,  rgba(255,232,175,.80) 99%, transparent 100%),
    radial-gradient(0.5px 0.5px at 33% 62%,  rgba(255,225,155,.90) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 43% 70%,  rgba(255,235,185,.85) 99%, transparent 100%),
    radial-gradient(0.3px 0.3px at 52% 58%,  rgba(255,220,145,.92) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 63% 66%,  rgba(255,230,170,.85) 99%, transparent 100%),
    radial-gradient(0.5px 0.5px at 72% 54%,  rgba(255,240,195,.82) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 81% 64%,  rgba(255,225,155,.88) 99%, transparent 100%),
    radial-gradient(0.3px 0.3px at 90% 56%,  rgba(244,210,110,.92) 99%, transparent 100%),

    radial-gradient(0.5px 0.5px at 10% 86%,  rgba(255,220,145,.90) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 20% 78%,  rgba(255,235,185,.85) 99%, transparent 100%),
    radial-gradient(0.3px 0.3px at 31% 88%,  rgba(255,215,130,.95) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 44% 80%,  rgba(255,230,170,.85) 99%, transparent 100%),
    radial-gradient(0.5px 0.5px at 57% 90%,  rgba(255,240,195,.80) 99%, transparent 100%),
    radial-gradient(0.2px 0.2px at 71% 82%,  rgba(255,225,155,.88) 99%, transparent 100%),
    radial-gradient(0.3px 0.3px at 86% 90%,  rgba(244,210,110,.92) 99%, transparent 100%);
}

/* star sprites around the pill */
.sparkle{
  position:absolute; z-index:3; pointer-events:none;
  font-size: clamp(14px, 2.2vw, 20px);
  color: color-mix(in oklab, var(--brand, #c49a2c), #fff 25%);
  text-shadow: 0 0 8px rgba(255,215,130,.85), 0 0 18px rgba(255,215,130,.55);
  opacity:.85;
}
.s1{ top:-14px; left:-18px; }
.s2{ top:-10px; right:-22px; }
.s3{ bottom:-16px; left:12px; transform: rotate(12deg); }
.s4{ bottom:-18px; right:10px; }
.s5{ top:-26px; left:50%; transform:translateX(-50%) rotate(-10deg); }

/* Wrapper when the pill lives in the HERO */
.anniv-hero{ display:inline-block; margin:0 0 .9rem; }

/* Home page hero uses .hero-section (not .page-hero-banner) */
@media (max-width: $nav-break){
  .hero-section .anniv-wrap { display: none !important; }
}

/* Desktop spacing for the home pill */
@media (min-width: $nav-break + 0.02px){
  .hero-section .anniv-wrap { margin: 0 0 .9rem; }
}

/* Hide the HERO pill on mobile so it doesn't clash with the title */
@media (max-width: $nav-break){
  .page-hero-banner .anniv-hero,
  .page-hero-banner .anniv-wrap { display: none !important; }
}

/* HOME (mobile): pill under title */
@media (max-width: $nav-break){
  body.home .hero-section .hero-content{
    display: flex; flex-direction: column; align-items: flex-start; gap: .25rem;
  }
  body.home .hero-section .hero-title{ order: 1; }
  body.home .hero-section .anniv-wrap{
    display: inline-flex !important; order: 2; margin: 2rem 0 0;
  }
  body.home .hero-section .anniv-pill{
    font-size: clamp(12px, 3.4vw, 14px);
    padding: .28rem .55rem; gap: .25rem;
    box-shadow: inset 0 -1px 0 rgba(0,0,0,.12), 0 3px 10px rgba(0,0,0,.16);
  }
  body.home .hero-section .sparkle{ font-size: 12px; }
  body.home .hero-section .anniv-wrap::before{ inset: -10px -12px; }
  body.home .nav-anniv{ display: none !important; }
}

/* Tiny desktop tweak */
@media (min-width: $nav-break + 0.02px){
  body.home .hero-section .anniv-wrap{ margin: .35rem 0 0; }
}

/* Phones: center text + tweak filters & bg position */
@media (max-width: 600px){
  .page-hero-banner{
    text-align:center; align-items:flex-end; background-position: 50% 35%;
    &::before{
      backdrop-filter: blur(2px);
      -webkit-backdrop-filter: blur(2px);
      background-color: rgba(1,63,135,.35);
    }
  }
  .page-hero-banner .hero-glass{
    margin-inline:auto; max-width: calc(100% - 2 * var(--pad-x));
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce){
  .page-hero-banner::before{ backdrop-filter: none; }
}
